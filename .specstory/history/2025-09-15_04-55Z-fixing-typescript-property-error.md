<!-- Generated by SpecStory -->

<!-- cursor Session 50f3ec0a-1097-4768-8452-303a37dff46d (2025-09-15 04:55Z) -->

# Fixing TypeScript property error (2025-09-15 04:55Z)

_**User (2025-09-20 04:50Z)**_

For the code present, we get this error:
```
Property 'errors' does not exist on type 'object & Record<"name", unknown>'.
```
How can I resolve this? If you propose a fix, please make it concise.

---

_**Assistant (default)**_

Looking at the error, the issue is that TypeScript doesn't know that the `error` object has an `errors` property. The type assertion is too generic.

Here's a concise fix:


---

Tool use: **search_replace**


<details><summary>Edit file: src/lib/utils.ts</summary>

**Chunk 1**
Lines added: 3, lines removed: 2

```diff
@@ -97,11 +97,12 @@
      typeof error === "object" &&
      "name" in error &&
-     error.name === "ValidationError"
+     error.name === "ValidationError" &&
+     "errors" in error
    ) {
      return NextResponse.json(
        {
          success: false,
          error: "Validation Error",
-         details: Object.values(error.errors).map((err: unknown) => err.message),
+         details: Object.values((error as any).errors).map((err: any) => err.message),
        },
        { status: 400 }
```

</details>

---

The fix adds a check for the `"errors"` property and uses `as any` type assertions to bypass TypeScript's strict typing for the error object properties. This resolves the compilation error while maintaining the runtime safety checks.

---

_**User (2025-09-20 04:50Z)**_

For the code present, we get this error:
```
Unexpected any. Specify a different type.
```
How can I resolve this? If you propose a fix, please make it concise.

---

_**Assistant (default)**_

The error is from ESLint complaining about using `any`. Here's a concise fix using proper TypeScript types:


---

Tool use: **search_replace**


<details><summary>Edit file: src/lib/utils.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -88,5 +88,5 @@
  // Utility function to handle API errors
  export function handleApiError(
-   error: any,
+   error: unknown,
    message: string = "An error occurred"
  ) {
```

</details>

---

Tool use: **search_replace**


<details><summary>Edit file: src/lib/utils.ts</summary>

**Chunk 1**
Lines added: 2, lines removed: 2

```diff
@@ -104,6 +104,6 @@
          success: false,
          error: "Validation Error",
-         details: Object.values((error as any).errors).map(
-           (err: any) => err.message
+         details: Object.values((error as { errors: Record<string, { message: string }> }).errors).map(
+           (err) => err.message
          ),
        },
```

</details>

---

The fix:
1. Changed the parameter back to `error: unknown` (proper TypeScript practice)
2. Used a specific type assertion `{ errors: Record<string, { message: string }> }` instead of `any`
3. Removed the explicit `any` type from the map function parameter

This maintains type safety while avoiding ESLint's `any` restriction.

---

_**User (2025-09-20 04:50Z)**_

For the code present, we get this error:
```
'error' is of type 'unknown'.
```
How can I resolve this? If you propose a fix, please make it concise.

---

_**Assistant (default)**_

The error occurs because TypeScript doesn't know that `error` has a `code` property. Here's a concise fix:


---

Tool use: **search_replace**


<details><summary>Edit file: src/lib/utils.ts</summary>

**Chunk 1**
Lines added: 1, lines removed: 1

```diff
@@ -112,5 +112,5 @@
    }
  
-   if (error.code === 11000) {
+   if (error && typeof error === "object" && "code" in error && (error as { code: number }).code === 11000) {
      return NextResponse.json(
        {
```

</details>

---

The fix adds proper type guards to check that `error` is an object with a `code` property before accessing it, using a type assertion `{ code: number }` to safely access the property.

---

